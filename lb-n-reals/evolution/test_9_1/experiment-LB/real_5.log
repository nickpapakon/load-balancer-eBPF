+ ip route add 10.1.0.0/16 via 10.1.3.101 dev eth0
+ ip link add name ipip0 type ipip external
+ ip link set up dev ipip0
+ ip a a 127.0.0.42/32 dev ipip0
+ '[' -z 5 ']'
+ echo 'Configuring Real Server NUM=5'
+ ip a a 10.1.50.0/24 dev lo
Configuring Real Server NUM=5
+ echo 'Set VIPs as loopback addresses'
Set VIPs as loopback addresses
++ sysctl -a
++ awk '/\.rp_filter/ {print $1}'
+ for sc in $(sysctl -a | awk '/\.rp_filter/ {print $1}')
+ echo net.ipv4.conf.all.rp_filter
+ sysctl net.ipv4.conf.all.rp_filter=0
net.ipv4.conf.all.rp_filter
net.ipv4.conf.all.rp_filter = 0
+ for sc in $(sysctl -a | awk '/\.rp_filter/ {print $1}')
+ echo net.ipv4.conf.default.rp_filter
+ sysctl net.ipv4.conf.default.rp_filter=0
net.ipv4.conf.default.rp_filter
net.ipv4.conf.default.rp_filter = 0
+ for sc in $(sysctl -a | awk '/\.rp_filter/ {print $1}')
+ echo net.ipv4.conf.erspan0.rp_filter
+ sysctl net.ipv4.conf.erspan0.rp_filter=0
net.ipv4.conf.erspan0.rp_filter
net.ipv4.conf.erspan0.rp_filter = 0
net.ipv4.conf.eth0.rp_filter
+ for sc in $(sysctl -a | awk '/\.rp_filter/ {print $1}')
+ echo net.ipv4.conf.eth0.rp_filter
+ sysctl net.ipv4.conf.eth0.rp_filter=0
net.ipv4.conf.eth0.rp_filter = 0
net.ipv4.conf.gre0.rp_filter
+ for sc in $(sysctl -a | awk '/\.rp_filter/ {print $1}')
+ echo net.ipv4.conf.gre0.rp_filter
+ sysctl net.ipv4.conf.gre0.rp_filter=0
net.ipv4.conf.gre0.rp_filter = 0
net.ipv4.conf.gretap0.rp_filter
+ for sc in $(sysctl -a | awk '/\.rp_filter/ {print $1}')
+ echo net.ipv4.conf.gretap0.rp_filter
+ sysctl net.ipv4.conf.gretap0.rp_filter=0
net.ipv4.conf.gretap0.rp_filter = 0
+ for sc in $(sysctl -a | awk '/\.rp_filter/ {print $1}')
+ echo net.ipv4.conf.ip6_vti0.rp_filter
+ sysctl net.ipv4.conf.ip6_vti0.rp_filter=0
net.ipv4.conf.ip6_vti0.rp_filter
net.ipv4.conf.ip6_vti0.rp_filter = 0
+ for sc in $(sysctl -a | awk '/\.rp_filter/ {print $1}')
+ echo net.ipv4.conf.ip6gre0.rp_filter
+ sysctl net.ipv4.conf.ip6gre0.rp_filter=0
net.ipv4.conf.ip6gre0.rp_filter
net.ipv4.conf.ip6gre0.rp_filter = 0
net.ipv4.conf.ip6tnl0.rp_filter
+ for sc in $(sysctl -a | awk '/\.rp_filter/ {print $1}')
+ echo net.ipv4.conf.ip6tnl0.rp_filter
+ sysctl net.ipv4.conf.ip6tnl0.rp_filter=0
net.ipv4.conf.ip6tnl0.rp_filter = 0
net.ipv4.conf.ip_vti0.rp_filter
+ for sc in $(sysctl -a | awk '/\.rp_filter/ {print $1}')
+ echo net.ipv4.conf.ip_vti0.rp_filter
+ sysctl net.ipv4.conf.ip_vti0.rp_filter=0
net.ipv4.conf.ip_vti0.rp_filter = 0
+ for sc in $(sysctl -a | awk '/\.rp_filter/ {print $1}')
net.ipv4.conf.ipip0.rp_filter
+ echo net.ipv4.conf.ipip0.rp_filter
+ sysctl net.ipv4.conf.ipip0.rp_filter=0
net.ipv4.conf.ipip0.rp_filter = 0
+ for sc in $(sysctl -a | awk '/\.rp_filter/ {print $1}')
net.ipv4.conf.lo.rp_filter
+ echo net.ipv4.conf.lo.rp_filter
+ sysctl net.ipv4.conf.lo.rp_filter=0
net.ipv4.conf.lo.rp_filter = 0
net.ipv4.conf.sit0.rp_filter
+ for sc in $(sysctl -a | awk '/\.rp_filter/ {print $1}')
+ echo net.ipv4.conf.sit0.rp_filter
+ sysctl net.ipv4.conf.sit0.rp_filter=0
net.ipv4.conf.sit0.rp_filter = 0
+ for sc in $(sysctl -a | awk '/\.rp_filter/ {print $1}')
+ echo net.ipv4.conf.tunl0.rp_filter
+ sysctl net.ipv4.conf.tunl0.rp_filter=0
net.ipv4.conf.tunl0.rp_filter
net.ipv4.conf.tunl0.rp_filter = 0
+ topics=("non_existing_topic" "\$share/vip_a/measurements/temperature" "\$share/vip_a/measurements/temperature" "\$share/vip_b/measurements/humidity" "\$share/vip_b/measurements/humidity" "\$share/vip_default/measurements/other" "\$share/vip_default/measurements/other")
+ ping -c 1 -W 1 10.1.3.101
+ '[' 0 -eq 1 ']'
+ mosquitto -v -c /etc/mosquitto/conf.d/mosquitto.conf
1771927052: mosquitto version 2.0.22 starting
1771927052: Config loaded from /etc/mosquitto/conf.d/mosquitto.conf.
1771927052: Opening ipv4 listen socket on port 1883.
1771927052: Opening ipv6 listen socket on port 1883.
1771927052: mosquitto version 2.0.22 running
1771927432: New connection from 10.1.1.216:34801 on port 1883.
1771927432: New client connected from 10.1.1.216:34801 as client_6 (p2, c1, k4).
1771927432: No will message specified.
1771927432: Sending CONNACK to client_6 (0, 0)
1771927432: New connection from 10.1.1.215:47775 on port 1883.
1771927432: New client connected from 10.1.1.215:47775 as client_5 (p2, c1, k4).
1771927432: No will message specified.
1771927432: Sending CONNACK to client_5 (0, 0)
1771927432: New connection from 10.1.1.212:52049 on port 1883.
1771927432: New client connected from 10.1.1.212:52049 as client_2 (p2, c1, k4).
1771927432: No will message specified.
1771927432: Sending CONNACK to client_2 (0, 0)
1771927432: New connection from 10.1.1.210:43557 on port 1883.
1771927432: New client connected from 10.1.1.210:43557 as client_0 (p2, c1, k4).
1771927432: No will message specified.
1771927432: Sending CONNACK to client_0 (0, 0)
1771927432: New connection from 10.1.1.213:60959 on port 1883.
1771927432: New client connected from 10.1.1.213:60959 as client_3 (p2, c1, k4).
1771927432: No will message specified.
1771927432: Sending CONNACK to client_3 (0, 0)
1771927433: New connection from 10.1.1.218:49409 on port 1883.
1771927433: New client connected from 10.1.1.218:49409 as client_8 (p2, c1, k4).
1771927433: No will message specified.
1771927433: Sending CONNACK to client_8 (0, 0)
1771927433: New connection from 10.1.1.211:44621 on port 1883.
1771927433: New client connected from 10.1.1.211:44621 as client_1 (p2, c1, k4).
1771927433: No will message specified.
1771927433: Sending CONNACK to client_1 (0, 0)
1771927436: Received PINGREQ from client_6
1771927436: Sending PINGRESP to client_6
1771927436: Received PINGREQ from client_5
1771927436: Sending PINGRESP to client_5
1771927436: Received PINGREQ from client_2
1771927436: Sending PINGRESP to client_2
1771927436: Received PINGREQ from client_0
1771927436: Sending PINGRESP to client_0
1771927436: Received PINGREQ from client_3
1771927436: Sending PINGRESP to client_3
1771927437: Received PINGREQ from client_8
1771927437: Sending PINGRESP to client_8
1771927437: Received PINGREQ from client_1
1771927437: Sending PINGRESP to client_1
1771927442: Client client_6 has exceeded timeout, disconnecting.
1771927443: Client client_5 has exceeded timeout, disconnecting.
1771927443: Client client_2 has exceeded timeout, disconnecting.
1771927443: Client client_0 has exceeded timeout, disconnecting.
1771927443: Client client_3 has exceeded timeout, disconnecting.
1771927444: Client client_8 has exceeded timeout, disconnecting.
1771927444: Client client_1 has exceeded timeout, disconnecting.
